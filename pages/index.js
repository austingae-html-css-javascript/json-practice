import Head from 'next/head'
import Image from 'next/image'
import styles from '../styles/Home.module.css'

export default function Home({motherInfo, kittenInfo}) {
  console.log(motherInfo);
  console.log(kittenInfo);
  return (
    <div className={styles.container}>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main>
        {
          motherInfo.map((catName) => {
            return (
              <h3>{catName}</h3>
            );
          })
        }
        <p>Number of Kittens: {kittenInfo[0]}</p>
        <p>Number of Male Kittens: {kittenInfo[1]}</p>
        <p>Number of Female Kittens: {kittenInfo[2]}</p>
      </main>
    </div>
  )
}

export async function getStaticProps(context) {

  let response = await fetch("https://raw.githubusercontent.com/mdn/learning-area/main/javascript/oojs/tasks/json/sample.json");
  let data = await response.json();

  let motherInfo = [];
  data.forEach((cat) => {
    motherInfo.push(cat.name);
  }) 

  let kittenInfo = [0, 0, 0]; //number of kittens, number of male kittens, number of female kittens
  data.forEach((cat) => {
    kittenInfo[0] = kittenInfo[0] + cat.kittens.length; //adding up the number of kittens

    (cat.kittens).forEach((kitten) => {
      if (kitten.gender == "m") {
        kittenInfo[1] = kittenInfo[1] + 1;
      }
      else if (kitten.gender == "f") {
        kittenInfo[2] = kittenInfo[2] + 1;
      }
    })
  })
  
  return {
    props: {
      motherInfo: motherInfo,
      kittenInfo: kittenInfo,
    }
  }
}

/*
https://www.codegrepper.com/code-examples/javascript/async%2Fawait+to+fetch+the+json+data
https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/JSON#active_learning_working_through_a_json_example

*/

/*
JSON.parse(data) means turning data from string to Javascript object
JSON.stringify(data) means turning data from Javascript object to string
*/